{% extends "base.html" %}
{% load i18n %}

{% block title %}{% trans "My Profile" %} - Nobodies Profiles{% endblock %}

{% block content %}
<div class="container">
    <h1>{% trans "My Profile" %}</h1>

    {% if profile %}
    <div class="profile-view">
        <dl class="profile-details">
            <dt>{% trans "Legal Name" %}</dt>
            <dd>{{ profile.legal_name }}</dd>

            <dt>{% trans "Email" %}</dt>
            <dd>{{ user.email }}</dd>

            <dt>{% trans "Display Name" %}</dt>
            <dd>{{ user.display_name|default:"-" }}</dd>

            <dt>{% trans "Country of Residence" %}</dt>
            <dd>{{ profile.country_of_residence }}</dd>

            <dt>{% trans "Preferred Language" %}</dt>
            <dd>{{ user.get_preferred_language_display }}</dd>

            <dt>{% trans "Member Since" %}</dt>
            <dd>{{ profile.created_at|date:"F j, Y" }}</dd>

            <dt>{% trans "Current Status" %}</dt>
            <dd>{{ profile.membership_status }}</dd>
        </dl>

        {% if profile_tags %}
        <div class="profile-tags mt-4">
            <h3>{% trans "Tags" %}</h3>
            <div class="tag-list">
                {% for pt in profile_tags %}
                <span class="tag-badge" style="background-color: {{ pt.tag.color }}; color: white; padding: 4px 12px; border-radius: 16px; margin-right: 8px; margin-bottom: 8px; display: inline-block;">
                    {% if pt.tag.icon %}<i class="{{ pt.tag.icon }}"></i> {% endif %}{{ pt.tag.name }}
                </span>
                {% endfor %}
            </div>
            {% if has_self_assignable_tags %}
            <a href="{% url 'members:edit_tags' %}" class="btn btn-sm btn-outline-secondary mt-2">{% trans "Edit My Tags" %}</a>
            {% endif %}
        </div>
        {% elif has_self_assignable_tags %}
        <div class="profile-tags mt-4">
            <h3>{% trans "Tags" %}</h3>
            <p class="text-muted">{% trans "You haven't added any tags yet." %}</p>
            <a href="{% url 'members:edit_tags' %}" class="btn btn-sm btn-outline-secondary">{% trans "Add Tags" %}</a>
        </div>
        {% endif %}

        <p class="edit-note mt-4">
            {% trans "To update your profile information, please contact the Board." %}
        </p>
    </div>
    {% else %}
    <p>{% trans "You don't have a profile yet. Please submit a membership application." %}</p>
    <a href="{% url 'applications:apply' %}" class="btn btn-primary">{% trans "Apply for Membership" %}</a>
    {% endif %}

    <!-- Help Section -->
    <div class="card mt-4">
        <details>
            <summary style="cursor: pointer; font-weight: bold; padding: 15px;">{% trans "About Your Profile" %}</summary>
            <div class="card-body pt-0">
                <h4 class="h6">{% trans "What's stored here?" %}</h4>
                <p>{% trans "Your profile contains your membership information: legal name, country of residence, and membership history. This is separate from your login account, which stores email and password." %}</p>

                <h4 class="h6 mt-3">{% trans "Making Changes" %}</h4>
                <dl>
                    <dt>{% trans "Display Name & Language" %}</dt>
                    <dd>{% trans "You can change these in your account settings (coming soon) or contact the Board." %}</dd>

                    <dt>{% trans "Legal Name" %}</dt>
                    <dd>{% trans "Must match your government ID. To change this (e.g., after a name change), contact the Board with documentation." %}</dd>

                    <dt>{% trans "Country of Residence" %}</dt>
                    <dd>{% trans "Contact the Board if you've moved to a different country." %}</dd>

                    <dt>{% trans "Email Address" %}</dt>
                    <dd>{% trans "Your email is tied to your Google account for login. To use a different email, contact the Board." %}</dd>
                </dl>

                {% if profile_tags or has_self_assignable_tags %}
                <h4 class="h6 mt-3">{% trans "About Tags" %}</h4>
                <p>{% trans "Tags are like badges that show your involvement and interests. Some tags (like 'Camp Lead') are assigned by the organization. Others you can add yourself to express your interests or skills." %}</p>
                {% endif %}

                <p class="text-muted mt-3">
                    {% trans "Need to update something? Contact" %} <a href="mailto:board@nobodies.team">board@nobodies.team</a>
                </p>
            </div>
        </details>
    </div>

    <div class="actions mt-4">
        <a href="{% url 'dashboard' %}" class="btn btn-secondary">{% trans "Back to Dashboard" %}</a>
    </div>
</div>
{% endblock %}
